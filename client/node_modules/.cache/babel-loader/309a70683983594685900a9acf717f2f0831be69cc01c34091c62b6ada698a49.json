{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport React, { useMemo, useLayoutEffect } from 'react';\nimport { Tabs as MantineTabs } from '@mantine/core';\nimport styled from '@emotion/styled';\nimport { NotificationsListTab } from './NotificationsListTab';\nimport { UnseenBadge } from './UnseenBadge';\nimport { Tabs } from './layout/tabs/Tabs';\nimport { useNotificationCenter, useNotifications, useFeedUnseenCount, useNovuContext } from '../../../hooks';\nexport function FeedsTabs() {\n  const {\n    tabs,\n    onTabClick\n  } = useNotificationCenter();\n  const {\n    storeId,\n    setStore,\n    markFetchedNotificationsAsSeen\n  } = useNotifications();\n  const {\n    setFetchingStrategy\n  } = useNovuContext();\n  function handleOnTabChange(newStoreId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      markFetchedNotificationsAsSeen();\n      setStore(newStoreId);\n    });\n  }\n  useLayoutEffect(() => {\n    setFetchingStrategy({\n      fetchNotifications: true\n    });\n  }, [setFetchingStrategy]);\n  return React.createElement(React.Fragment, null, (tabs === null || tabs === void 0 ? void 0 : tabs.length) ? React.createElement(Tabs, {\n    value: storeId,\n    onTabChange: handleOnTabChange\n  }, React.createElement(MantineTabs.List, null, tabs.map((tab, index) => React.createElement(MantineTabs.Tab, {\n    onClick: () => {\n      onTabClick(tab);\n    },\n    key: index,\n    \"data-test-id\": `tab-${tab.storeId}`,\n    value: tab.storeId\n  }, React.createElement(TabLabelWrapper, null, tab.name, React.createElement(UnseenBadgeContainer, {\n    storeId: tab.storeId\n  }))))), tabs.map((tab, index) => React.createElement(MantineTabs.Panel, {\n    value: tab.storeId,\n    key: index\n  }, React.createElement(NotificationsListTab, null)))) : React.createElement(NotificationsListTab, null));\n}\nconst TabLabelWrapper = styled.div`\n  margin-bottom: 13px;\n  min-height: 22px;\n  line-height: 19px;\n`;\nfunction UnseenBadgeContainer({\n  storeId\n}) {\n  var _a;\n  const {\n    stores\n  } = useNotifications();\n  const query = useMemo(() => {\n    var _a;\n    const foundQuery = ((_a = stores === null || stores === void 0 ? void 0 : stores.find(i => i.storeId === storeId)) === null || _a === void 0 ? void 0 : _a.query) || {};\n    return Object.assign({}, foundQuery, {\n      seen: false,\n      limit: 100\n    });\n  }, [stores]);\n  const {\n    data\n  } = useFeedUnseenCount({\n    query\n  });\n  const unseenCount = query.seen ? 0 : (_a = data === null || data === void 0 ? void 0 : data.count) !== null && _a !== void 0 ? _a : 0;\n  return React.createElement(UnseenBadge, {\n    unseenCount: unseenCount\n  });\n}","map":{"version":3,"names":["React","useMemo","useLayoutEffect","Tabs","MantineTabs","styled","NotificationsListTab","UnseenBadge","useNotificationCenter","useNotifications","useFeedUnseenCount","useNovuContext","FeedsTabs","tabs","onTabClick","storeId","setStore","markFetchedNotificationsAsSeen","setFetchingStrategy","handleOnTabChange","newStoreId","fetchNotifications","createElement","Fragment","length","value","onTabChange","List","map","tab","index","Tab","onClick","key","TabLabelWrapper","name","UnseenBadgeContainer","Panel","div","stores","query","foundQuery","_a","find","i","Object","assign","seen","limit","data","unseenCount","count"],"sources":["../../../../../src/components/notification-center/components/FeedsTabs.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}