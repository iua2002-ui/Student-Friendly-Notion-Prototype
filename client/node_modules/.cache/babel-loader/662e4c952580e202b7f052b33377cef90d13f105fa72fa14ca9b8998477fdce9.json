{"ast":null,"code":"import React, { useLayoutEffect } from 'react';\nimport { Accordion, ScrollArea } from '@mantine/core';\nimport { css, cx } from '@emotion/css';\nimport { useNovuTheme, useFetchUserPreferences, useNovuContext, useNotificationCenter } from '../../../../hooks';\nimport { accordionStyles } from './styles';\nimport { useStyles } from '../../../../store/styles';\nimport { UserPreferenceItem } from './UserPreferenceItem';\nimport { Loader } from '../Loader';\nimport { NoSettings } from '../../../../images/NoSettings';\nconst rootClassName = css`\n  padding: 15px;\n`;\nexport function SubscriberPreference() {\n  var _a;\n  const {\n    setFetchingStrategy\n  } = useNovuContext();\n  const {\n    theme,\n    common\n  } = useNovuTheme();\n  const {\n    data,\n    isLoading: arePreferencesLoading\n  } = useFetchUserPreferences();\n  const {\n    preferenceFilter\n  } = useNotificationCenter();\n  const [rootStyles, accordionItemStyles, accordionContentStyles, accordionControlStyles, accordionChevronStyles] = useStyles(['preferences.root', 'accordion.item', 'accordion.content', 'accordion.control', 'accordion.chevron']);\n  const baseTheme = theme === null || theme === void 0 ? void 0 : theme.userPreferences;\n  let preferences = (_a = data === null || data === void 0 ? void 0 : data.filter(item => !item.template.critical)) === null || _a === void 0 ? void 0 : _a.filter(pref => Object.keys(pref.preference.channels).length > 0);\n  if (preferenceFilter && preferences) {\n    preferences = preferences.filter(pref => preferenceFilter(pref));\n  }\n  const styles = accordionStyles(baseTheme, common.fontFamily);\n  const accordionClassNames = {\n    item: css(accordionItemStyles),\n    content: css(accordionContentStyles),\n    control: css(accordionControlStyles),\n    chevron: css(accordionChevronStyles)\n  };\n  const showNoSettings = !arePreferencesLoading && (preferences === null || preferences === void 0 ? void 0 : preferences.length) === 0;\n  useLayoutEffect(() => {\n    setFetchingStrategy({\n      fetchUserPreferences: true\n    });\n  }, [setFetchingStrategy]);\n  return arePreferencesLoading ? React.createElement(Loader, null) : React.createElement(React.Fragment, null, showNoSettings ? React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      minHeight: 400,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  }, React.createElement(NoSettings, {\n    style: {\n      maxWidth: 300\n    }\n  })) : React.createElement(ScrollArea, {\n    style: {\n      height: 400\n    }\n  }, React.createElement(\"div\", {\n    className: cx('nc-preferences-root', rootClassName, css(rootStyles))\n  }, React.createElement(Accordion, {\n    chevronPosition: \"right\",\n    styles: styles,\n    classNames: accordionClassNames\n  }, preferences === null || preferences === void 0 ? void 0 : preferences.map(preference => React.createElement(UserPreferenceItem, {\n    key: preference.template._id,\n    preferenceSettings: preference\n  }))))));\n}","map":{"version":3,"names":["React","useLayoutEffect","Accordion","ScrollArea","css","cx","useNovuTheme","useFetchUserPreferences","useNovuContext","useNotificationCenter","accordionStyles","useStyles","UserPreferenceItem","Loader","NoSettings","rootClassName","SubscriberPreference","setFetchingStrategy","theme","common","data","isLoading","arePreferencesLoading","preferenceFilter","rootStyles","accordionItemStyles","accordionContentStyles","accordionControlStyles","accordionChevronStyles","baseTheme","userPreferences","preferences","_a","filter","item","template","critical","pref","Object","keys","preference","channels","length","styles","fontFamily","accordionClassNames","content","control","chevron","showNoSettings","fetchUserPreferences","createElement","Fragment","style","textAlign","minHeight","display","alignItems","justifyContent","maxWidth","height","className","chevronPosition","classNames","map","key","_id","preferenceSettings"],"sources":["../../../../../../src/components/notification-center/components/user-preference/SubscriberPreference.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}