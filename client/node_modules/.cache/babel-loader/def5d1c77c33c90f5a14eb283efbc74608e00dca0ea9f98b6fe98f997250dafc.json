{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useNovuContext } from './useNovuContext';\nimport { useFetchNotificationsQueryKey } from './useFetchNotificationsQueryKey';\nexport const useMarkNotificationsAsSeen = (_a = {}) => {\n  var {\n      onSuccess,\n      query\n    } = _a,\n    options = __rest(_a, [\"onSuccess\", \"query\"]);\n  const queryClient = useQueryClient();\n  const {\n    apiService\n  } = useNovuContext();\n  const fetchNotificationsQueryKey = useFetchNotificationsQueryKey();\n  const _b = useMutation(({\n      feedId\n    }) => apiService.markAllMessagesAsSeen(feedId), Object.assign(Object.assign({}, options), {\n      onSuccess: (responseData, variables, context) => {\n        queryClient.setQueriesData({\n          queryKey: fetchNotificationsQueryKey,\n          exact: false\n        }, infiniteData => {\n          const pages = infiniteData.pages.map(page => {\n            const data = page.data.map(message => {\n              return Object.assign(Object.assign({}, message), {\n                read: false,\n                seen: true\n              });\n            });\n            return Object.assign(Object.assign({}, page), {\n              data\n            });\n          });\n          return {\n            pageParams: infiniteData.pageParams,\n            pages\n          };\n        });\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(responseData, variables, context);\n      }\n    })),\n    {\n      mutate\n    } = _b,\n    result = __rest(_b, [\"mutate\"]);\n  return Object.assign(Object.assign({}, result), {\n    markNotificationsAsSeen: mutate\n  });\n};","map":{"version":3,"names":["useMutation","useQueryClient","useNovuContext","useFetchNotificationsQueryKey","useMarkNotificationsAsSeen","_a","onSuccess","query","options","__rest","queryClient","apiService","fetchNotificationsQueryKey","_b","feedId","markAllMessagesAsSeen","Object","assign","responseData","variables","context","setQueriesData","queryKey","exact","infiniteData","pages","map","page","data","message","read","seen","pageParams","mutate","result","markNotificationsAsSeen"],"sources":["../../../src/hooks/useMarkNotificationAsSeen.ts"],"sourcesContent":[null],"mappings":";;;;;;;;AAAA,SAAuBA,WAAW,EAAsBC,cAAc,QAAQ,uBAAuB;AAKrG,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,6BAA6B,QAAQ,iCAAiC;AAM/E,OAAO,MAAMC,0BAA0B,GAAGA,CAACC,EAAA,GAOoC,EAAE,KAAI;MAP1C;MACzCC,SAAS;MACTC;IAAK,IAAAF,EAK0E;IAJ5EG,OAAO,GAAAC,MAAA,CAAAJ,EAAA,EAH+B,sBAI1C,CADW;EAKV,MAAMK,WAAW,GAAGT,cAAc,EAAE;EACpC,MAAM;IAAEU;EAAU,CAAE,GAAGT,cAAc,EAAE;EACvC,MAAMU,0BAA0B,GAAGT,6BAA6B,EAAE;EAElE,MAAMU,EAAA,GAAwBb,WAAW,CACvC,CAAC;MAAEc;IAAM,CAAE,KAAKH,UAAU,CAACI,qBAAqB,CAACD,MAAM,CAAC,EAAAE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAEnDT,OAAO;MACVF,SAAS,EAAEA,CAACY,YAAY,EAAEC,SAAS,EAAEC,OAAO,KAAI;QAC9CV,WAAW,CAACW,cAAc,CACxB;UAAEC,QAAQ,EAAEV,0BAA0B;UAAEW,KAAK,EAAE;QAAK,CAAE,EACrDC,YAAY,IAAI;UACf,MAAMC,KAAK,GAAGD,YAAY,CAACC,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAI;YAC5C,MAAMC,IAAI,GAAGD,IAAI,CAACC,IAAI,CAACF,GAAG,CAAEG,OAAO,IAAI;cACrC,OAAAb,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAYY,OAAO;gBAAEC,IAAI,EAAE,KAAK;gBAAEC,IAAI,EAAE;cAAI;YAC9C,CAAC,CAAC;YAEF,OAAAf,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACKU,IAAI;cACPC;YAAI;UAER,CAAC,CAAC;UAEF,OAAO;YACLI,UAAU,EAAER,YAAY,CAACQ,UAAU;YACnCP;WACD;QACH,CAAC,CACF;QACDnB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAGY,YAAY,EAAEC,SAAS,EAAEC,OAAO,CAAC;MAC/C;IAAC,GAEJ;IA5BK;MAAEa;IAAM,IAAApB,EA4Bb;IA5BkBqB,MAAM,GAAAzB,MAAA,CAAAI,EAAA,EAAnB,UAAqB,CA4B1B;EAED,OAAAG,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAYiB,MAAM;IAAEC,uBAAuB,EAAEF;EAAM;AACrD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}